<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Prova</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }
        
        .main-container {
            display: flex;
            min-height: 100vh;
        }
        
        .left-panel {
            width: 300px;
            background-color: #e0e0e0;
            padding: 20px;
            position: relative;
        }
        
        .logo-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo-text {
            font-size: 48px;
            font-weight: bold;
            color: #888;
        }
        
        .title-section {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title-main {
            font-size: 64px;
            font-weight: bold;
            color: #999;
            line-height: 0.9;
            margin-bottom: 20px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #666;
        }
        
        .form-control {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: white;
        }
        
        .radio-group {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .radio-item input[type="radio"] {
            width: 20px;
            height: 20px;
        }
        
        .save-button {
            background-color: #888;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
        
        .export-buttons {
            margin-top: 15px;
        }
        
        .export-button {
            background-color: #666;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .right-panel {
            flex: 1;
            background-color: white;
            padding: 20px;
            border-left: 1px solid #ccc;
        }
        
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
        }
        
        .header-info {
            flex: 1;
        }
        
        .header-row {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .header-input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 15px;
            background-color: #f9f9f9;
        }
        
        .header-input.small {
            flex: 0.5;
        }
        
        .logo-placeholder {
            width: 100px;
            height: 60px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 12px;
        }
        
        .prova-info {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .prova-title {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 15px;
            background-color: #f9f9f9;
        }
        
        .prova-type {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 15px;
            background-color: #f9f9f9;
        }
        
        .accessibility-section {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .accessibility-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .accessibility-options {
            display: flex;
            gap: 20px;
        }
        
        .accessibility-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .accessibility-option input[type="radio"] {
            width: 20px;
            height: 20px;
        }
        
        .add-question-area {
            background-color: #f0f0f0;
            border: 2px dashed #ccc;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .add-question-area:hover {
            background-color: #e8e8e8;
            border-color: #999;
        }
        
        .add-icon {
            font-size: 48px;
            color: #ccc;
            margin-bottom: 10px;
        }
        
        .add-text {
            color: #666;
            font-size: 16px;
        }
        
        .questoes-preview {
            margin-top: 20px;
        }
        
        .questao-item {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .questao-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 10px;
        }
        
        .questao-title {
            font-weight: bold;
            flex: 1;
        }
        
        .remove-btn {
            background: none;
            border: none;
            color: #dc3545;
            font-size: 18px;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 10px;
        }
        
        .questao-content {
            margin-top: 10px;
        }
        
        .alternativa-item {
            margin: 5px 0;
            padding: 5px;
            background-color: white;
            border-radius: 3px;
        }
        
        .questao-accessibility {
            margin-top: 10px;
            padding: 8px;
            background-color: #e9ecef;
            border-radius: 5px;
            font-size: 12px;
        }
        
        /* Modal styles */
        .modal-questoes {
            max-width: 90vw;
        }
        
        .questoes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            max-height: 60vh;
            overflow-y: auto;
            padding: 10px;
        }
        
        .questao-card-modal {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
            background: white;
        }
        
        .questao-card-modal:hover {
            border-color: #007bff;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);
        }
        
        .questao-card-modal.selecionada {
            border-color: #28a745;
            background-color: #f8fff8;
        }
        
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        
        .loading.show {
            display: flex;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Painel Esquerdo -->
        <div class="left-panel">
            
            
        
            
            <form id="form-prova" class="form-section">
                {% csrf_token %}
                <div class="form-group">
                    <label>Tipo de Prova</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="tipo_a" name="tipo_prova" value="A">
                            <label for="tipo_a">Tipo A</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="tipo_b" name="tipo_prova" value="B">
                            <label for="tipo_b">Tipo B</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="tipo_c" name="tipo_prova" value="C">
                            <label for="tipo_c">Tipo C</label>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="save-button" onclick="salvarProva()">
                    SALVAR PROVA
                </button>
                
                <div class="export-buttons">
                    <button type="button" class="export-button" onclick="exportarPDF()">
                        <i class="fas fa-file-pdf"></i> Exportar PDF
                    </button>
                    <button type="button" class="export-button" onclick="exportarDOC()">
                        <i class="fas fa-file-word"></i> Exportar DOC
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Painel Direito -->
        <div class="right-panel">
            <div class="header-section">
                <div class="header-info">
                    <div class="header-row">
                        <input type="text" id="nome_escola" class="header-input" placeholder="Nome da Escola">
                        <div class="logo-placeholder">Sua LOGO</div>
                    </div>
                    <div class="header-row">
                        <input type="text" id="aluno" class="header-input" placeholder="Aluno:">
                        <input type="text" id="nota" class="header-input small" placeholder="Nota">
                    </div>
                    <div class="header-row">
                        <input type="text" id="serie" class="header-input small" placeholder="Série:">
                        <input type="text" id="turma" class="header-input small" placeholder="Turma:">
                        <input type="text" id="turno" class="header-input small" placeholder="Turno:">
                    </div>
                </div>
            </div>
            
            <div class="prova-info">
                <input type="text" id="titulo" name="titulo" class="prova-title" placeholder="Título da Prova" required>
                <input type="text" id="materia" name="materia" class="prova-type" placeholder="Tipo de prova" required>
            </div>
            
            <div class="accessibility-section">
                <div class="accessibility-title">NÍVEL DE ACESSIBILIDADE DA PROVA:</div>
                <div class="accessibility-options">
                    <div class="accessibility-option">
                        <input type="radio" id="grupo1" name="acessibilidade_prova" value="1" checked>
                        <label for="grupo1">Grupo 1</label>
                    </div>
                    <div class="accessibility-option">
                        <input type="radio" id="grupo2" name="acessibilidade_prova" value="2">
                        <label for="grupo2">Grupo 2</label>
                    </div>
                    <div class="accessibility-option">
                        <input type="radio" id="grupo3" name="acessibilidade_prova" value="3">
                        <label for="grupo3">Grupo 3</label>
                    </div>
                </div>
            </div>
            
            <!-- Área de Questões -->
            <div id="questoes-preview">
                <!-- Questões serão adicionadas aqui -->
            </div>
            
            <!-- Área para Adicionar Questões -->
            <div class="add-question-area" onclick="abrirModalSelecionarQuestoes()">
                <div class="add-icon">+</div>
                <div class="add-text">Clique para adicionar questões</div>
            </div>
        </div>
    </div>

    <!-- Modal para Selecionar Questões -->
    <div class="modal fade" id="modalSelecionarQuestoes" tabindex="-1">
        <div class="modal-dialog modal-questoes">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-question-circle text-primary"></i>
                        Selecionar Questões para a Prova
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Barra de Pesquisa -->
                    <div class="mb-3">
                        <div class="input-group">
                            <span class="input-group-text">
                                <i class="fas fa-search"></i>
                            </span>
                            <input type="text" class="form-control" id="search-questoes-modal" 
                                   placeholder="Buscar por título, matéria ou tipo..." 
                                   onkeyup="filtrarQuestoesModal()">
                        </div>
                    </div>
                    
                    <!-- Grid de Questões -->
                    <div class="questoes-grid" id="questoes-grid">
                        {% for questao in questoes_dashboard %}
                            <div class="questao-card-modal" 
                                 data-id="{{ questao.id }}" 
                                 data-titulo="{{ questao.titulo }}" 
                                 data-materia="{{ questao.materia }}"
                                 data-tipo="{{ questao.tipo }}"
                                 onclick="toggleQuestaoSelecao({{ questao.id }}, this)">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1 text-primary">{{ questao.titulo|truncatechars:60 }}</h6>
                                        <div class="d-flex flex-wrap gap-1 mb-2">
                                            <span class="badge bg-secondary">{{ questao.materia }}</span>
                                            <span class="badge bg-info">{{ questao.get_tipo_display }}</span>
                                        </div>
                                        <small class="text-muted">
                                            {{ questao.ano_escolar }} - {{ questao.grupo_ensino }}
                                        </small>
                                    </div>
                                    <div class="text-end">
                                        <i class="fas fa-check-circle text-success" style="display: none;"></i>
                                        <i class="fas fa-plus-circle text-primary"></i>
                                    </div>
                                </div>
                            </div>
                        {% empty %}
                            <div class="col-12 text-center text-muted p-4">
                                <i class="fas fa-question-circle fa-3x mb-3"></i>
                                <p>Nenhuma questão disponível</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="me-auto">
                        <span class="text-muted">
                            <span id="questoes-selecionadas-count">0</span> questão(ões) selecionada(s)
                        </span>
                    </div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="confirmarSelecaoQuestoes()">
                        <i class="fas fa-check"></i> Adicionar Selecionadas
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading">
        <div class="spinner-border text-light" role="status">
            <span class="visually-hidden">Carregando...</span>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        let questoesSelecionadas = [];
        let questoesSelecionadasTemp = []; // Para o modal de seleção

        // Atualiza preview quando campos são alterados
        document.getElementById('titulo').addEventListener('input', function() {
            document.getElementById('preview-titulo').textContent = this.value || 'Título da Prova';
        });

        document.getElementById('materia').addEventListener('input', function() {
            document.getElementById('preview-materia').textContent = this.value || '-';
        });

        document.getElementById('tipo_prova').addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            document.getElementById('preview-tipo').textContent = selectedOption.text || '-';
        });

        // Nova função para abrir modal de seleção de questões
        function abrirModalSelecionarQuestoes() {
            questoesSelecionadasTemp = [...questoesSelecionadas]; // Copia as questões já selecionadas
            atualizarVisualizacaoModal();
            const modal = new bootstrap.Modal(document.getElementById('modalSelecionarQuestoes'));
            modal.show();
        }

        // Função para toggle de seleção de questão no modal
        function toggleQuestaoSelecao(questaoId, element) {
            const index = questoesSelecionadasTemp.findIndex(q => q.id == questaoId);
            const icons = element.querySelectorAll('i');
            const checkIcon = icons[0]; // check-circle
            const plusIcon = icons[1]; // plus-circle
            
            if (index > -1) {
                // Remove da seleção
                questoesSelecionadasTemp.splice(index, 1);
                element.classList.remove('selecionada');
                checkIcon.style.display = 'none';
                plusIcon.style.display = 'block';
            } else {
                // Busca dados da questão e adiciona à seleção temporária
                const questaoData = {
                    id: questaoId,
                    titulo: element.dataset.titulo,
                    materia: element.dataset.materia,
                    tipo: element.dataset.tipo
                };
                questoesSelecionadasTemp.push(questaoData);
                element.classList.add('selecionada');
                checkIcon.style.display = 'block';
                plusIcon.style.display = 'none';
            }
            
            atualizarContadorSelecao();
        }

        // Atualiza a visualização do modal baseada nas questões já selecionadas
        function atualizarVisualizacaoModal() {
            const cards = document.querySelectorAll('.questao-card-modal');
            cards.forEach(card => {
                const questaoId = card.dataset.id;
                const isSelected = questoesSelecionadasTemp.some(q => q.id == questaoId);
                const icons = card.querySelectorAll('i');
                const checkIcon = icons[0];
                const plusIcon = icons[1];
                
                if (isSelected) {
                    card.classList.add('selecionada');
                    checkIcon.style.display = 'block';
                    plusIcon.style.display = 'none';
                } else {
                    card.classList.remove('selecionada');
                    checkIcon.style.display = 'none';
                    plusIcon.style.display = 'block';
                }
            });
            atualizarContadorSelecao();
        }

        // Atualiza contador de questões selecionadas
        function atualizarContadorSelecao() {
            document.getElementById('questoes-selecionadas-count').textContent = questoesSelecionadasTemp.length;
        }

        // Filtrar questões no modal
        function filtrarQuestoesModal() {
            const searchTerm = document.getElementById('search-questoes-modal').value.toLowerCase();
            const questoes = document.querySelectorAll('.questao-card-modal');
            
            questoes.forEach(questao => {
                const titulo = questao.dataset.titulo.toLowerCase();
                const materia = questao.dataset.materia.toLowerCase();
                const tipo = questao.dataset.tipo.toLowerCase();
                
                if (titulo.includes(searchTerm) || materia.includes(searchTerm) || tipo.includes(searchTerm)) {
                    questao.style.display = 'block';
                } else {
                    questao.style.display = 'none';
                }
            });
        }

        // Confirma a seleção de questões e carrega dados completos
        async function confirmarSelecaoQuestoes() {
            try {
                showLoading();
                
                // Remove questões que não estão mais selecionadas
                questoesSelecionadas = questoesSelecionadas.filter(q => 
                    questoesSelecionadasTemp.some(temp => temp.id == q.id)
                );
                
                // Adiciona novas questões selecionadas
                for (const questaoTemp of questoesSelecionadasTemp) {
                    if (!questoesSelecionadas.find(q => q.id == questaoTemp.id)) {
                        // Busca dados completos da questão
                        const questaoCompleta = await buscarQuestaoCompleta(questaoTemp.id);
                        if (questaoCompleta) {
                            questoesSelecionadas.push(questaoCompleta);
                        }
                    }
                }
                
                atualizarPreview();
                
                // Fecha o modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('modalSelecionarQuestoes'));
                modal.hide();
                
            } catch (error) {
                alert('Erro ao adicionar questões: ' + error.message);
            } finally {
                hideLoading();
            }
        }

        // Função para buscar dados completos da questão (mantém a lógica original)
        async function buscarQuestaoCompleta(questaoId) {
            const formData = new FormData();
            formData.append('action', 'buscar_questao');
            formData.append('questao_id', questaoId);
            formData.append('csrfmiddlewaretoken', document.querySelector('[name=csrfmiddlewaretoken]').value);

            const response = await fetch('', {
                method: 'POST',
                body: formData
            });

            const data = await response.json();
            
            if (data.success) {
                return data.questao;
            } else {
                console.error('Erro ao carregar questão:', data.error);
                return null;
            }
        }

        function removerQuestao(index) {
            questoesSelecionadas.splice(index, 1);
            atualizarPreview();
        }

        function atualizarPreview() {
            const container = document.getElementById('questoes-preview');
            
            if (questoesSelecionadas.length === 0) {
                container.innerHTML = `
                    <p class="text-center text-muted">
                        <i class="fas fa-info-circle"></i> 
                        Adicione questões para visualizar o preview da prova
                    </p>
                `;
                return;
            }

            let html = '';
            questoesSelecionadas.forEach((questao, index) => {
                html += `
                    <div class="questao-preview">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h6><strong>${index + 1}. ${questao.titulo}</strong></h6>
                            <button class="btn btn-sm btn-danger" onclick="removerQuestao(${index})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                `;

                // Imagens da questão
                if (questao.imagens && questao.imagens.length > 0) {
                    questao.imagens.forEach(img => {
                        if (img.imagem) {
                            html += `<img src="/media/${img.imagem}" class="questao-imagem" alt="Imagem da questão">`;
                            if (img.legenda) {
                                html += `<p class="text-muted small"><em>${img.legenda}</em></p>`;
                            }
                        }
                    });
                }

                // Conteúdo específico por tipo
                if (questao.tipo === 'multipla' && questao.alternativas) {
                    questao.alternativas.forEach((alt, altIndex) => {
                        const letra = String.fromCharCode(97 + altIndex); // a, b, c, d...
                        html += `<div class="alternativa-item">${letra}) ${alt.texto}</div>`;
                    });
                } else if (questao.tipo === 'vf' && questao.frases_vf) {
                    questao.frases_vf.forEach(frase => {
                        html += `<div class="frase-vf-item">( ) ${frase.texto}</div>`;
                    });
                } else if (questao.tipo === 'aberta') {
                    html += `
                        <div class="mt-3">
                            <div style="border-bottom: 1px solid #ccc; margin: 10px 0; height: 20px;"></div>
                            <div style="border-bottom: 1px solid #ccc; margin: 10px 0; height: 20px;"></div>
                            <div style="border-bottom: 1px solid #ccc; margin: 10px 0; height: 20px;"></div>
                        </div>
                    `;
                }

                html += '</div>';
            });

            container.innerHTML = html;
        }

        async function salvarProva() {
            if (!validarFormulario()) return;

            try {
                showLoading();

                const formData = new FormData(document.getElementById('form-prova'));
                formData.append('action', 'salvar_prova');
                formData.append('questoes_selecionadas', JSON.stringify(questoesSelecionadas));

                const response = await fetch('', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                
                if (data.success) {
                    alert('Prova salva com sucesso!');
                } else {
                    alert('Erro ao salvar prova: ' + data.error);
                }
            } catch (error) {
                alert('Erro ao salvar prova: ' + error.message);
            } finally {
                hideLoading();
            }
        }

        async function exportarPDF() {
            if (!validarFormulario()) return;

            try {
                showLoading();

                const formData = new FormData(document.getElementById('form-prova'));
                formData.append('action', 'exportar_pdf');
                formData.append('questoes_selecionadas', JSON.stringify(questoesSelecionadas));

                const response = await fetch('', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${document.getElementById('titulo').value || 'prova'}.pdf`;
                    a.click();
                    window.URL.revokeObjectURL(url);
                } else {
                    const data = await response.json();
                    alert('Erro ao exportar PDF: ' + data.error);
                }
            } catch (error) {
                alert('Erro ao exportar PDF: ' + error.message);
            } finally {
                hideLoading();
            }
        }

        async function exportarDOC() {
            if (!validarFormulario()) return;

            try {
                showLoading();

                const formData = new FormData(document.getElementById('form-prova'));
                formData.append('action', 'exportar_doc');
                formData.append('questoes_selecionadas', JSON.stringify(questoesSelecionadas));

                const response = await fetch('', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${document.getElementById('titulo').value || 'prova'}.docx`;
                    a.click();
                    window.URL.revokeObjectURL(url);
                } else {
                    const data = await response.json();
                    alert('Erro ao exportar DOC: ' + data.error);
                }
            } catch (error) {
                alert('Erro ao exportar DOC: ' + error.message);
            } finally {
                hideLoading();
            }
        }

        function validarFormulario() {
            const titulo = document.getElementById('titulo').value.trim();
            const materia = document.getElementById('materia').value.trim();
            const tipo = document.getElementById('tipo_prova').value;

            if (!titulo || !materia || !tipo) {
                alert('Preencha todos os campos obrigatórios!');
                return false;
            }

            if (questoesSelecionadas.length === 0) {
                alert('Adicione pelo menos uma questão à prova!');
                return false;
            }

            return true;
        }

        function abrirModalNovaQuestao() {
            const modal = new bootstrap.Modal(document.getElementById('modalNovaQuestao'));
            modal.show();
        }

        function toggleTipoQuestao() {
            const tipo = document.getElementById('nova-tipo').value;
            const alternativasSection = document.getElementById('alternativas-section');
            const vfSection = document.getElementById('vf-section');

            alternativasSection.style.display = 'none';
            vfSection.style.display = 'none';

            if (tipo === 'multipla') {
                alternativasSection.style.display = 'block';
            } else if (tipo === 'vf') {
                vfSection.style.display = 'block';
            }
        }

        function adicionarAlternativa() {
            const container = document.getElementById('alternativas-container');
            const count = container.children.length;
            const letra = String.fromCharCode(97 + count);
            
            const div = document.createElement('div');
            div.className = 'alternativa-input mb-2';
            div.innerHTML = `
                <div class="input-group">
                    <span class="input-group-text">${letra})</span>
                    <input type="text" class="form-control" name="alternativas[]" placeholder="Digite a alternativa">
                    <div class="input-group-text">
                        <input type="radio" name="correta" value="${count}" title="Marcar como correta">
                    </div>
                    <button type="button" class="btn btn-outline-danger" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            container.appendChild(div);
        }

        function adicionarFrase() {
            const container = document.getElementById('frases-container');
            const div = document.createElement('div');
            div.className = 'frase-input mb-2';
            div.innerHTML = `
                <div class="input-group">
                    <input type="text" class="form-control" name="frases[]" placeholder="Digite a frase">
                    <select class="form-select" name="verdadeira[]" style="max-width: 120px;">
                        <option value="1">Verdadeiro</option>
                        <option value="0">Falso</option>
                    </select>
                    <button type="button" class="btn btn-outline-danger" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            container.appendChild(div);
        }

        async function salvarNovaQuestao() {
            // Implementar lógica para salvar nova questão
            alert('Funcionalidade de criar nova questão em desenvolvimento');
        }

        function showLoading() {
            document.querySelector('.loading').style.display = 'flex';
        }

        function hideLoading() {
            document.querySelector('.loading').style.display = 'none';
        }
    </script>
    </body>
</html>